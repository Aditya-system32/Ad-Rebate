{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"/run/media/silenttush/Data/WorkSpace/Web Projects/Ad-rebate/Screens/ProfileComplete.js\";\nimport \"react-native-gesture-handler\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Picker } from \"@react-native-picker/picker\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport { ScrollView, TouchableNativeFeedback } from \"react-native-gesture-handler\";\nimport { AuthContext } from \"../routes/AuthProvider\";\nimport { globalstyles } from \"../styles/global\";\nimport { db } from \"../firebases\";\nimport { addPushTokenListener } from \"expo-notifications\";\nimport Constants from \"expo-constants\";\nimport * as Notifications from \"expo-notifications\";\nimport { useSelector } from \"react-redux\";\nimport BannerImages from \"./BannerImages\";\nNotifications.setNotificationHandler({\n  handleNotification: function handleNotification() {\n    return _regeneratorRuntime.async(function handleNotification$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", {\n              shouldShowAlert: true,\n              shouldPlaySound: false,\n              shouldSetBadge: false\n            });\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n});\nexport default function ProfileComplete(_ref) {\n  var _this = this;\n\n  var navigation = _ref.navigation;\n\n  var _useState = useState(\"bhilai\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      location = _useState2[0],\n      setLocation = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      fullName = _useState4[0],\n      setFullName = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      age = _useState6[0],\n      setAge = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      couponArray = _useState8[0],\n      setCouponArray = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      token = _useState10[0],\n      setToken = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      nativesToken = _useState12[0],\n      setNativesToken = _useState12[1];\n\n  var _useState13 = useState(\"male\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      gender = _useState14[0],\n      setGender = _useState14[1];\n\n  var _useContext = useContext(AuthContext),\n      user = _useContext.user;\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      expoPushToken = _useState16[0],\n      setExpoPushToken = _useState16[1];\n\n  var _useState17 = useState(\"\"),\n      _useState18 = _slicedToArray(_useState17, 2),\n      referralId = _useState18[0],\n      setReferralId = _useState18[1];\n\n  var _useState19 = useState(null),\n      _useState20 = _slicedToArray(_useState19, 2),\n      clientName = _useState20[0],\n      setClientName = _useState20[1];\n\n  var _useState21 = useState([{\n    value: \"bhilai\",\n    label: \"Bhilai\",\n    key: \"Bhilai\"\n  }, {\n    value: \"raipur\",\n    label: \"Raipur\",\n    key: \"Raipur\"\n  }]),\n      _useState22 = _slicedToArray(_useState21, 2),\n      locationOptions = _useState22[0],\n      setLocationOptions = _useState22[1];\n\n  var _useState23 = useState([{\n    value: \"male\",\n    label: \"male\",\n    key: \"male\"\n  }, {\n    value: \"female\",\n    label: \"female\",\n    key: \"female\"\n  }, {\n    value: \"other\",\n    label: \"other\",\n    key: \"other\"\n  }]),\n      _useState24 = _slicedToArray(_useState23, 2),\n      genderOptions = _useState24[0],\n      setgenderOptions = _useState24[1];\n\n  useEffect(function () {\n    var backAction = function backAction() {\n      (function () {\n        return null;\n      });\n\n      return true;\n    };\n\n    var backHandler = BackHandler.addEventListener(\"hardwareBackPress\", backAction);\n    return function () {\n      backHandler.remove();\n    };\n  }, []);\n  useEffect(function () {\n    var tempClientName = [];\n    db.collection(\"ClientData\").get().then(function (res) {\n      res.forEach(function (doc) {\n        tempClientName.push(doc.data().id);\n      });\n      setClientName(tempClientName);\n    });\n  }, []);\n  useEffect(function () {\n    if (token !== undefined) {\n      var data = {\n        Coupons: {},\n        username: fullName,\n        history: {},\n        couponsReceived: {},\n        id: user.uid,\n        expoToken: token,\n        location: location,\n        age: age,\n        gender: gender,\n        phone: user.phoneNumber\n      };\n      checkingReferralId();\n      setUserData();\n      var tempCouponArray = [];\n\n      function giveCoupons() {\n        var randomNumber;\n        return _regeneratorRuntime.async(function giveCoupons$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                randomNumber = Math.floor(Math.random() * clientName.length);\n                db.collection(\"ClientData\").doc(clientName[randomNumber]).collection(\"Coupons\").where(\"isAlloted\", \"==\", false).limit(2).get().then(function (querySnapshot) {\n                  querySnapshot.forEach(function (doc) {\n                    tempCouponArray.push(doc.data());\n                  });\n                }).then(function () {\n                  tempCouponArray.map(function (coupon, index) {\n                    var current = new Date();\n                    current.setHours(current.getHours());\n                    var x = current.getHours() + \"-\" + current.getMinutes();\n                    var d = current.getDate() + \"-\" + (current.getMonth() + 1) + \"-\" + current.getFullYear();\n                    var datas = {\n                      activeFromTime: x,\n                      activeFromDate: d,\n                      isAlloted: true,\n                      allotedTo: user.uid\n                    };\n\n                    if (index === 1) {\n                      datas.allotedTo = referralId;\n                    }\n\n                    db.collection(\"ClientData\").doc(coupon.client).collection(\"Coupons\").doc(coupon.id).set(datas, {\n                      merge: true\n                    }).then(function () {\n                      return console.log(\"done\");\n                    }).catch(function (err) {\n                      console.log(err);\n                    });\n                  });\n                });\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      }\n\n      function checkingReferralId() {\n        return _regeneratorRuntime.async(function checkingReferralId$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                db.collection(\"Users\").doc(referralId == \"\" ? \"No Referral Id\" : referralId).get().then(function (doc) {\n                  if (doc.exists) {\n                    giveCoupons();\n                  } else {\n                    if (referralId == \"\") {\n                      console.log(\"User Not Enter Referral Id\");\n                    } else {\n                      alert(\"Not Valid Id\");\n                    }\n                  }\n                });\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      }\n\n      function setUserData() {\n        var userDoc;\n        return _regeneratorRuntime.async(function setUserData$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                userDoc = db.collection(\"Users\").doc(user.uid);\n                userDoc.set(data).then(function () {\n                  return navigation.navigate(\"AppIntroSliders\");\n                }).catch(function (err) {\n                  console.log(err);\n                });\n\n              case 2:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      }\n    } else {}\n  }, [token]);\n\n  var checkingTheUserMobile = function checkingTheUserMobile() {\n    var registerForPushNotificationsAsync;\n    return _regeneratorRuntime.async(function checkingTheUserMobile$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            registerForPushNotificationsAsync = function _registerForPushNotif() {\n              var token, _await$Notifications$, existingStatus, finalStatus, _await$Notifications$2, status;\n\n              return _regeneratorRuntime.async(function registerForPushNotificationsAsync$(_context5) {\n                while (1) {\n                  switch (_context5.prev = _context5.next) {\n                    case 0:\n                      if (!Constants.isDevice) {\n                        _context5.next = 22;\n                        break;\n                      }\n\n                      _context5.next = 3;\n                      return _regeneratorRuntime.awrap(Notifications.getPermissionsAsync());\n\n                    case 3:\n                      _await$Notifications$ = _context5.sent;\n                      existingStatus = _await$Notifications$.status;\n                      finalStatus = existingStatus;\n\n                      if (!(existingStatus !== \"granted\")) {\n                        _context5.next = 12;\n                        break;\n                      }\n\n                      _context5.next = 9;\n                      return _regeneratorRuntime.awrap(Notifications.requestPermissionsAsync());\n\n                    case 9:\n                      _await$Notifications$2 = _context5.sent;\n                      status = _await$Notifications$2.status;\n                      finalStatus = status;\n\n                    case 12:\n                      if (!(finalStatus !== \"granted\")) {\n                        _context5.next = 15;\n                        break;\n                      }\n\n                      alert(\"Failed to get push token for push notification!\");\n                      return _context5.abrupt(\"return\");\n\n                    case 15:\n                      _context5.next = 17;\n                      return _regeneratorRuntime.awrap(Notifications.getDevicePushTokenAsync());\n\n                    case 17:\n                      tokens = _context5.sent.data;\n                      console.log(tokens);\n                      setToken(tokens);\n                      _context5.next = 23;\n                      break;\n\n                    case 22:\n                      alert(\"Must use physical device for Push Notifications\");\n\n                    case 23:\n                      if (Platform.OS === \"android\") {\n                        Notifications.setNotificationChannelAsync(\"default\", {\n                          name: \"default\",\n                          importance: Notifications.AndroidImportance.MAX,\n                          vibrationPattern: [0, 250, 250, 250],\n                          lightColor: \"#FF231F7C\"\n                        });\n                      }\n\n                      return _context5.abrupt(\"return\", token);\n\n                    case 25:\n                    case \"end\":\n                      return _context5.stop();\n                  }\n                }\n              }, null, null, null, Promise);\n            };\n\n            registerForPushNotificationsAsync().then(function (token) {\n              return setExpoPushToken(token);\n            });\n\n          case 2:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(View, {\n    style: globalstyles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 5\n    }\n  }, React.createElement(StatusBar, {\n    backgroundColor: \"black\",\n    barStyle: \"light-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: styles.banner,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }\n  }, React.createElement(BannerImages, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.welcomeBackWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.welcomeBack,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }\n  }, \"Complete profile\")), React.createElement(ScrollView, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 9\n    }\n  }, React.createElement(TextInput, {\n    style: styles.textinput,\n    placeholder: \"Full Name\",\n    placeholderTextColor: \"#EDEDED\",\n    color: \"#fff\",\n    onChangeText: function onChangeText(text) {\n      return setFullName(text);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 11\n    }\n  })), React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 9\n    }\n  }, React.createElement(TextInput, {\n    style: [styles.textinput, styles.textPassword],\n    placeholder: \"Age\",\n    placeholderTextColor: \"#EDEDED\",\n    color: \"#fff\",\n    onChangeText: function onChangeText(age) {\n      return setAge(age);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 11\n    }\n  })), React.createElement(View, {\n    style: styles.picker,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 9\n    }\n  }, React.createElement(Picker, {\n    style: {\n      width: \"100%\",\n      height: 61,\n      color: \"#fff\"\n    },\n    selectedValue: location,\n    onValueChange: function onValueChange(itemValue, itemIndex) {\n      return setLocation(itemValue);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 11\n    }\n  }, locationOptions.map(function (item) {\n    return React.createElement(Picker.Item, {\n      label: item.label,\n      value: item.value,\n      key: item.key,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 17\n      }\n    });\n  }))), React.createElement(View, {\n    style: styles.picker,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 9\n    }\n  }, React.createElement(Picker, {\n    style: {\n      width: \"100%\",\n      height: 61,\n      color: \"#fff\"\n    },\n    selectedValue: gender,\n    onValueChange: function onValueChange(itemValue, itemIndex) {\n      return setGender(itemValue);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 11\n    }\n  }, genderOptions.map(function (item) {\n    return React.createElement(Picker.Item, {\n      label: item.label,\n      value: item.value,\n      key: item.key,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 17\n      }\n    });\n  }))), React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 9\n    }\n  }, React.createElement(TextInput, {\n    style: styles.textinput,\n    placeholder: \"Referral Id(Optional)\",\n    placeholderTextColor: \"#EDEDED\",\n    color: \"#fff\",\n    onChangeText: function onChangeText(referralId) {\n      return setReferralId(referralId);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 11\n    }\n  })), React.createElement(TouchableNativeFeedback, {\n    onPress: checkingTheUserMobile,\n    style: styles.ProfileCompleteButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.ProfileCompleteButtonTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 11\n    }\n  }, \"Finish\"))));\n}\nvar styles = StyleSheet.create({\n  picker: {\n    backgroundColor: \"#1A1A1A\",\n    borderColor: \"#424242\",\n    color: \"#ffffff\",\n    borderWidth: 1,\n    borderRadius: 20,\n    paddingLeft: 20,\n    paddingRight: 20,\n    width: \"80%\",\n    height: 61,\n    alignSelf: \"center\",\n    fontSize: 18,\n    fontFamily: \"Poppins-Regular\",\n    marginBottom: 24\n  },\n  ProfileCompleteWrapper: {\n    marginTop: 10\n  },\n  ProfileCompleteButton: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    alignSelf: \"center\",\n    width: 178,\n    borderRadius: 20,\n    height: 58,\n    borderColor: \"#fff\",\n    borderStyle: \"solid\",\n    borderWidth: 1\n  },\n  ProfileCompleteButtonTitle: {\n    color: \"#ffffff\",\n    fontSize: 18,\n    fontFamily: \"Poppins-Medium\"\n  },\n  banner: {\n    height: \"16%\",\n    backgroundColor: \"#000000\",\n    width: \"100%\",\n    marginBottom: \"2%\"\n  },\n  welcomeBackWrapper: {\n    marginBottom: 30,\n    marginTop: 20\n  },\n  welcomeBack: {\n    fontSize: 28,\n    fontFamily: \"Poppins-Medium\",\n    color: \"#EDEDED\",\n    alignSelf: \"center\",\n    width: \"80%\"\n  },\n  textinput: {\n    backgroundColor: \"#1A1A1A\",\n    borderColor: \"#424242\",\n    borderWidth: 1,\n    borderRadius: 20,\n    paddingLeft: 20,\n    paddingRight: 20,\n    width: \"80%\",\n    height: 61,\n    alignSelf: \"center\",\n    fontSize: 18,\n    fontFamily: \"Poppins-Regular\",\n    marginBottom: 24\n  },\n  textPassword: {\n    marginBottom: 16\n  },\n  forgetPass: {\n    color: \"#fff\",\n    alignSelf: \"center\",\n    width: \"80%\",\n    margin: 0\n  }\n});","map":{"version":3,"sources":["/run/media/silenttush/Data/WorkSpace/Web Projects/Ad-rebate/Screens/ProfileComplete.js"],"names":["React","useState","useEffect","useContext","Picker","ScrollView","TouchableNativeFeedback","AuthContext","globalstyles","db","addPushTokenListener","Constants","Notifications","useSelector","BannerImages","setNotificationHandler","handleNotification","shouldShowAlert","shouldPlaySound","shouldSetBadge","ProfileComplete","navigation","location","setLocation","fullName","setFullName","age","setAge","couponArray","setCouponArray","token","setToken","nativesToken","setNativesToken","gender","setGender","user","expoPushToken","setExpoPushToken","referralId","setReferralId","clientName","setClientName","value","label","key","locationOptions","setLocationOptions","genderOptions","setgenderOptions","backAction","backHandler","BackHandler","addEventListener","remove","tempClientName","collection","get","then","res","forEach","doc","push","data","id","undefined","Coupons","username","history","couponsReceived","uid","expoToken","phone","phoneNumber","checkingReferralId","setUserData","tempCouponArray","giveCoupons","randomNumber","Math","floor","random","length","where","limit","querySnapshot","map","coupon","index","current","Date","setHours","getHours","x","getMinutes","d","getDate","getMonth","getFullYear","datas","activeFromTime","activeFromDate","isAlloted","allotedTo","client","set","merge","console","log","catch","err","exists","alert","userDoc","navigate","checkingTheUserMobile","registerForPushNotificationsAsync","isDevice","getPermissionsAsync","existingStatus","status","finalStatus","requestPermissionsAsync","getDevicePushTokenAsync","tokens","Platform","OS","setNotificationChannelAsync","name","importance","AndroidImportance","MAX","vibrationPattern","lightColor","container","styles","banner","welcomeBackWrapper","welcomeBack","textinput","text","textPassword","picker","width","height","color","itemValue","itemIndex","item","ProfileCompleteButton","ProfileCompleteButtonTitle","StyleSheet","create","backgroundColor","borderColor","borderWidth","borderRadius","paddingLeft","paddingRight","alignSelf","fontSize","fontFamily","marginBottom","ProfileCompleteWrapper","marginTop","justifyContent","alignItems","borderStyle","forgetPass","margin"],"mappings":"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","sourcesContent":["import \"react-native-gesture-handler\";\r\nimport React, { useState, useEffect, useContext } from \"react\";\r\nimport { Picker } from \"@react-native-picker/picker\";\r\nimport {\r\n  Button,\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  Image,\r\n  StatusBar,\r\n  BackHandler,\r\n  TextInput,\r\n} from \"react-native\";\r\nimport {\r\n  ScrollView,\r\n  TouchableNativeFeedback,\r\n} from \"react-native-gesture-handler\";\r\nimport { AuthContext } from \"../routes/AuthProvider\";\r\nimport { globalstyles } from \"../styles/global\";\r\nimport { db } from \"../firebases\";\r\nimport { addPushTokenListener } from \"expo-notifications\";\r\nimport Constants from \"expo-constants\";\r\nimport * as Notifications from \"expo-notifications\";\r\nimport { useSelector } from \"react-redux\";\r\nimport BannerImages from \"./BannerImages\";\r\n\r\nNotifications.setNotificationHandler({\r\n  handleNotification: async () => ({\r\n    shouldShowAlert: true,\r\n    shouldPlaySound: false,\r\n    shouldSetBadge: false,\r\n  }),\r\n});\r\n\r\nexport default function ProfileComplete({ navigation }) {\r\n  const [location, setLocation] = useState(\"bhilai\");\r\n  const [fullName, setFullName] = useState();\r\n  const [age, setAge] = useState();\r\n  const [couponArray, setCouponArray] = useState(null);\r\n  const [token, setToken] = useState();\r\n  const [nativesToken, setNativesToken] = useState();\r\n  const [gender, setGender] = useState(\"male\");\r\n  const { user } = useContext(AuthContext);\r\n  const [expoPushToken, setExpoPushToken] = useState(\"\");\r\n  const [referralId, setReferralId] = useState(\"\");\r\n  const [clientName, setClientName] = useState(null);\r\n  const [locationOptions, setLocationOptions] = useState([\r\n    { value: \"bhilai\", label: \"Bhilai\", key: \"Bhilai\" },\r\n    { value: \"raipur\", label: \"Raipur\", key: \"Raipur\" },\r\n  ]);\r\n  const [genderOptions, setgenderOptions] = useState([\r\n    { value: \"male\", label: \"male\", key: \"male\" },\r\n    { value: \"female\", label: \"female\", key: \"female\" },\r\n    { value: \"other\", label: \"other\", key: \"other\" },\r\n  ]);\r\n  useEffect(() => {\r\n    const backAction = () => {\r\n      () => null;\r\n      return true;\r\n    };\r\n    const backHandler = BackHandler.addEventListener(\r\n      \"hardwareBackPress\",\r\n      backAction\r\n    );\r\n    return () => {\r\n      backHandler.remove();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const tempClientName = [];\r\n    db.collection(\"ClientData\")\r\n      .get()\r\n      .then((res) => {\r\n        res.forEach((doc) => {\r\n          tempClientName.push(doc.data().id);\r\n        });\r\n        setClientName(tempClientName);\r\n      });\r\n  }, []);\r\n\r\n  //TAKING THE DETAILS FROM THE USER\r\n  useEffect(() => {\r\n    if (token !== undefined) {\r\n      const data = {\r\n        Coupons: {},\r\n        username: fullName,\r\n        history: {},\r\n        couponsReceived: {},\r\n        id: user.uid,\r\n        expoToken: token,\r\n        location: location,\r\n        //nativeToken: nativesToken,\r\n        age: age,\r\n        gender: gender,\r\n        phone: user.phoneNumber,\r\n      };\r\n      checkingReferralId();\r\n      setUserData();\r\n      const tempCouponArray = [];\r\n      async function giveCoupons() {\r\n        const randomNumber = Math.floor(Math.random() * clientName.length);\r\n        db.collection(\"ClientData\")\r\n          .doc(clientName[randomNumber])\r\n          .collection(\"Coupons\")\r\n          .where(\"isAlloted\", \"==\", false)\r\n          .limit(2)\r\n          .get()\r\n          .then(function (querySnapshot) {\r\n            querySnapshot.forEach(function (doc) {\r\n              // doc.data() is never undefined for query doc snapshots\r\n              tempCouponArray.push(doc.data());\r\n            });\r\n          })\r\n          .then(() => {\r\n            //console.log(tempCouponArray);\r\n            tempCouponArray.map((coupon, index) => {\r\n              //console.log(coupon.id);\r\n\r\n              var current = new Date();\r\n              current.setHours(current.getHours());\r\n              const x = current.getHours() + \"-\" + current.getMinutes();\r\n              const d =\r\n                current.getDate() +\r\n                \"-\" +\r\n                (current.getMonth() + 1) +\r\n                \"-\" +\r\n                current.getFullYear();\r\n              const datas = {\r\n                activeFromTime: x,\r\n                activeFromDate: d,\r\n                isAlloted: true,\r\n                allotedTo: user.uid,\r\n              };\r\n\r\n              if (index === 1) {\r\n                datas.allotedTo = referralId;\r\n              }\r\n              //console.log(datas);\r\n              db.collection(\"ClientData\")\r\n                .doc(coupon.client)\r\n                .collection(\"Coupons\")\r\n                .doc(coupon.id)\r\n                .set(datas, { merge: true })\r\n                .then(() => console.log(\"done\"))\r\n                .catch((err) => {\r\n                  console.log(err);\r\n                });\r\n            });\r\n          });\r\n      }\r\n      async function checkingReferralId() {\r\n        db.collection(\"Users\")\r\n          .doc(referralId == \"\" ? \"No Referral Id\" : referralId)\r\n          .get()\r\n          .then((doc) => {\r\n            if (doc.exists) {\r\n              giveCoupons();\r\n            } else {\r\n              if (referralId == \"\") {\r\n                console.log(\"User Not Enter Referral Id\");\r\n              } else {\r\n                alert(\"Not Valid Id\");\r\n              }\r\n            }\r\n          });\r\n      }\r\n      async function setUserData() {\r\n        const userDoc = db.collection(\"Users\").doc(user.uid);\r\n        userDoc\r\n          .set(data)\r\n          .then(() => navigation.navigate(\"AppIntroSliders\"))\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      }\r\n    } else {\r\n    }\r\n  }, [token]);\r\n\r\n  //CHECKING THE USER MOBILE ( USING EMULATOR OR NOT ) IF NOT TAKING THE TOKEN FROM THE USER\r\n  const checkingTheUserMobile = async () => {\r\n    registerForPushNotificationsAsync().then((token) =>\r\n      setExpoPushToken(token)\r\n    );\r\n    async function registerForPushNotificationsAsync() {\r\n      let token;\r\n      if (Constants.isDevice) {\r\n        const {\r\n          status: existingStatus,\r\n        } = await Notifications.getPermissionsAsync();\r\n        let finalStatus = existingStatus;\r\n        if (existingStatus !== \"granted\") {\r\n          const { status } = await Notifications.requestPermissionsAsync();\r\n          finalStatus = status;\r\n        }\r\n        if (finalStatus !== \"granted\") {\r\n          alert(\"Failed to get push token for push notification!\");\r\n          return;\r\n        }\r\n        tokens = (await Notifications.getDevicePushTokenAsync()).data;\r\n        //natiToken = (await Notifications.getDevicePushTokenAsync()).data;\r\n        console.log(tokens);\r\n        setToken(tokens);\r\n      } else {\r\n        alert(\"Must use physical device for Push Notifications\");\r\n      }\r\n\r\n      if (Platform.OS === \"android\") {\r\n        Notifications.setNotificationChannelAsync(\"default\", {\r\n          name: \"default\",\r\n          importance: Notifications.AndroidImportance.MAX,\r\n          vibrationPattern: [0, 250, 250, 250],\r\n          lightColor: \"#FF231F7C\",\r\n        });\r\n      }\r\n\r\n      return token;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View style={globalstyles.container}>\r\n      <StatusBar backgroundColor=\"black\" barStyle=\"light-content\" />\r\n      <View style={styles.banner}>\r\n        <BannerImages />\r\n      </View>\r\n      <View style={styles.welcomeBackWrapper}>\r\n        <Text style={styles.welcomeBack}>Complete profile</Text>\r\n      </View>\r\n      <ScrollView>\r\n        <View>\r\n          <TextInput\r\n            style={styles.textinput}\r\n            placeholder=\"Full Name\"\r\n            placeholderTextColor=\"#EDEDED\"\r\n            color=\"#fff\"\r\n            onChangeText={(text) => setFullName(text)}\r\n          ></TextInput>\r\n        </View>\r\n        <View>\r\n          <TextInput\r\n            style={[styles.textinput, styles.textPassword]}\r\n            placeholder=\"Age\"\r\n            placeholderTextColor=\"#EDEDED\"\r\n            color=\"#fff\"\r\n            onChangeText={(age) => setAge(age)}\r\n          ></TextInput>\r\n        </View>\r\n        <View style={styles.picker}>\r\n          <Picker\r\n            style={{ width: \"100%\", height: 61, color: \"#fff\" }}\r\n            selectedValue={location}\r\n            onValueChange={(itemValue, itemIndex) => setLocation(itemValue)}\r\n          >\r\n            {locationOptions.map((item) => {\r\n              return (\r\n                <Picker.Item\r\n                  label={item.label}\r\n                  value={item.value}\r\n                  key={item.key}\r\n                />\r\n              );\r\n            })}\r\n          </Picker>\r\n        </View>\r\n        <View style={styles.picker}>\r\n          <Picker\r\n            style={{ width: \"100%\", height: 61, color: \"#fff\" }}\r\n            selectedValue={gender}\r\n            onValueChange={(itemValue, itemIndex) => setGender(itemValue)}\r\n          >\r\n            {genderOptions.map((item) => {\r\n              return (\r\n                <Picker.Item\r\n                  label={item.label}\r\n                  value={item.value}\r\n                  key={item.key}\r\n                />\r\n              );\r\n            })}\r\n          </Picker>\r\n        </View>\r\n        <View>\r\n          <TextInput\r\n            style={styles.textinput}\r\n            placeholder=\"Referral Id(Optional)\"\r\n            placeholderTextColor=\"#EDEDED\"\r\n            color=\"#fff\"\r\n            onChangeText={(referralId) => setReferralId(referralId)}\r\n          ></TextInput>\r\n        </View>\r\n        <TouchableNativeFeedback\r\n          onPress={checkingTheUserMobile}\r\n          style={styles.ProfileCompleteButton}\r\n        >\r\n          <Text style={styles.ProfileCompleteButtonTitle}>Finish</Text>\r\n        </TouchableNativeFeedback>\r\n      </ScrollView>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  picker: {\r\n    backgroundColor: \"#1A1A1A\",\r\n    borderColor: \"#424242\",\r\n    color: \"#ffffff\",\r\n    borderWidth: 1,\r\n    borderRadius: 20,\r\n    paddingLeft: 20,\r\n    paddingRight: 20,\r\n    width: \"80%\",\r\n    height: 61,\r\n    alignSelf: \"center\",\r\n    fontSize: 18,\r\n    fontFamily: \"Poppins-Regular\",\r\n    marginBottom: 24,\r\n  },\r\n  ProfileCompleteWrapper: {\r\n    marginTop: 10,\r\n  },\r\n  ProfileCompleteButton: {\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    alignSelf: \"center\",\r\n    width: 178,\r\n    borderRadius: 20,\r\n    height: 58,\r\n    borderColor: \"#fff\",\r\n    borderStyle: \"solid\",\r\n    borderWidth: 1,\r\n  },\r\n  ProfileCompleteButtonTitle: {\r\n    color: \"#ffffff\",\r\n    fontSize: 18,\r\n    fontFamily: \"Poppins-Medium\",\r\n  },\r\n  banner: {\r\n    height: \"16%\",\r\n    backgroundColor: \"#000000\",\r\n    width: \"100%\",\r\n    marginBottom: \"2%\",\r\n  },\r\n  welcomeBackWrapper: {\r\n    marginBottom: 30,\r\n    marginTop: 20,\r\n  },\r\n  welcomeBack: {\r\n    fontSize: 28,\r\n    fontFamily: \"Poppins-Medium\",\r\n    color: \"#EDEDED\",\r\n    alignSelf: \"center\",\r\n    width: \"80%\",\r\n  },\r\n  textinput: {\r\n    backgroundColor: \"#1A1A1A\",\r\n    borderColor: \"#424242\",\r\n    borderWidth: 1,\r\n    borderRadius: 20,\r\n    paddingLeft: 20,\r\n    paddingRight: 20,\r\n    width: \"80%\",\r\n    height: 61,\r\n    alignSelf: \"center\",\r\n    fontSize: 18,\r\n    fontFamily: \"Poppins-Regular\",\r\n    marginBottom: 24,\r\n  },\r\n  textPassword: {\r\n    marginBottom: 16,\r\n  },\r\n  forgetPass: {\r\n    color: \"#fff\",\r\n    alignSelf: \"center\",\r\n    width: \"80%\",\r\n    margin: 0,\r\n  },\r\n});\r\n\r\n//e7OII0Fu4HT4Lav5f2CXtDWN3OF3\r\n"]},"metadata":{},"sourceType":"module"}
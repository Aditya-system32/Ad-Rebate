{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"/run/media/silenttush/Data/WorkSpace/Web Projects/Ad-rebate/Screens/Home.js\";\nimport \"react-native-gesture-handler\";\nimport React, { useContext, useEffect, useState, useRef } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableNativeFeedback from \"react-native-web/dist/exports/TouchableNativeFeedback\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport ToastAndroid from \"react-native-web/dist/exports/ToastAndroid\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport * as Notifications from \"expo-notifications\";\nimport TextTicker from \"react-native-text-ticker\";\nimport { globalstyles } from \"../styles/global\";\nimport cash from \"../assets/images/currency.png\";\nimport coffee from \"../assets/images/coffee.png\";\nimport restauraunt from \"../assets/images/Restaurant.png\";\nimport coupons from \"../assets/svgs/coupons.png\";\nimport { AuthContext } from \"../routes/AuthProvider\";\nimport { db } from \"../firebases\";\nimport BannerImages from \"./BannerImages\";\nimport { set } from \"react-native-reanimated\";\nimport { useDispatch, useSelector } from \"react-redux\";\nNotifications.setNotificationHandler({\n  handleNotification: function handleNotification() {\n    return _regeneratorRuntime.async(function handleNotification$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", {\n              shouldShowAlert: true,\n              shouldPlaySound: false,\n              shouldSetBadge: false\n            });\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n});\n\nvar _Dimensions$get = Dimensions.get(\"window\"),\n    width = _Dimensions$get.width,\n    height = _Dimensions$get.height;\n\nvar baseWidth = 411;\nvar baseHeight = 771;\nvar scaleWidth = width / baseWidth;\nvar scaleHeight = height / baseHeight;\nvar scale = Math.min(scaleWidth, scaleHeight);\nexport var scaledSize = function scaledSize(size) {\n  return Math.ceil(size * scale);\n};\nexport default function HomeScreen(_ref) {\n  var _this = this;\n\n  var navigation = _ref.navigation;\n\n  var _useContext = useContext(AuthContext),\n      user = _useContext.user,\n      setUserData = _useContext.setUserData,\n      userData = _useContext.userData;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      pushnotification = _useState2[0],\n      setPushNotification = _useState2[1];\n\n  var dispatch = useDispatch();\n  var bannerData = useSelector(function (state) {\n    return state.bannerData.banners;\n  });\n  var notificationListener = useRef();\n  var responseListener = useRef();\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      notification = _useState4[0],\n      setNotifiaction = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      backPressed = _useState6[0],\n      setBackPressed = _useState6[1];\n\n  var _useState7 = useState([{\n    name: \"Cafe\",\n    value: \"cafe\",\n    img: coffee,\n    key: \"1\"\n  }, {\n    name: \"Restaurant\",\n    value: \"restaurant\",\n    img: restauraunt,\n    key: \"5\"\n  }]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      categoriesButtons = _useState8[0],\n      setCategoriesButtons = _useState8[1];\n\n  useEffect(function () {\n    var backAction = function backAction() {\n      BackHandler.exitApp();\n      return true;\n    };\n\n    var backHandler = BackHandler.addEventListener(\"hardwareBackPress\", backAction);\n    return function () {\n      backHandler.remove();\n    };\n  }, []);\n  useEffect(function () {}, [bannerData]);\n  useEffect(function () {\n    var isMounted = true;\n    checkUser();\n\n    function checkUser() {\n      var userDoc;\n      return _regeneratorRuntime.async(function checkUser$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (user !== null && isMounted) {\n                userDoc = db.collection(\"Users\").doc(user.uid);\n                userDoc.get().then(function (doc) {\n                  if (doc.exists) {\n                    setUserData(doc.data());\n                  } else {\n                    navigation.navigate(\"ProfileComplete\");\n                  }\n                }).catch(function (error) {\n                  console.log(\"Error getting document:\", error);\n                });\n              }\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    return function () {\n      isMounted = false;\n    };\n  }, []);\n  useEffect(function () {\n    var isMounted = true;\n    var noti = db.collection(\"Notification\").doc(\"notifications\");\n    noti.get().then(function (doc) {\n      if (doc.exists && isMounted) {\n        setNotifiaction(doc.data().notification);\n      } else {}\n    }).catch(function (error) {\n      console.log(\"Error getting document:\", error);\n    });\n    return function () {\n      isMounted = false;\n    };\n  }, []);\n  useEffect(function () {\n    var isMounted = true;\n\n    if (true) {\n      var bannerDoc = db.collection(\"Banners\").doc(userData == undefined ? \"bhilai\" : userData.location == null || userData.location === \"\" ? \"bhilai\" : userData.location);\n      bannerDoc.get().then(function (doc) {\n        if (doc.exists && isMounted) {\n          dispatch({\n            type: \"updateBanner\",\n            array: doc.data().banners\n          });\n        } else {}\n      }).catch(function (error) {\n        console.log(\"Error getting document:\", error);\n      });\n    }\n\n    return function () {\n      isMounted = false;\n    };\n  }, []);\n  notificationListener.current = Notifications.addNotificationReceivedListener(function (notification) {\n    setPushNotification(notification);\n  });\n  responseListener.current = Notifications.addNotificationResponseReceivedListener(function (response) {\n    console.log(response);\n  });\n\n  var buttonAlert = function buttonAlert() {\n    return Alert.alert(\"Update Alert\", \"This section will be available soon!\", [{\n      text: \"Cancel\",\n      style: \"cancel\"\n    }, {\n      text: \"OK\"\n    }], {\n      cancelable: false\n    });\n  };\n\n  useEffect(function () {\n    if (userData != undefined) {\n      if (userData.couponReceived != undefined) {}\n    }\n  }, []);\n  return React.createElement(View, {\n    style: globalstyles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 5\n    }\n  }, React.createElement(StatusBar, {\n    backgroundColor: \"black\",\n    barStyle: \"light-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: styles.banner,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }\n  }, React.createElement(BannerImages, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }\n  })), notification === null || notification === \"\" || notification === undefined || !user ? null : React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }\n  }, React.createElement(TextTicker, {\n    style: {\n      fontSize: 16,\n      color: \"#dadada\",\n      height: 50,\n      width: \"100%\",\n      paddingHorizontal: 15,\n      marginTop: 10,\n      fontFamily: \"Poppins-Regular\"\n    },\n    duration: 13000,\n    loop: true,\n    bounce: false,\n    marqueeOnMount: true,\n    animationType: \"scroll\",\n    shouldAnimateTreshold: 0,\n    repeatSpacer: 10,\n    marqueeDelay: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 11\n    }\n  }, notification)), React.createElement(View, {\n    style: styles.location,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.locationText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 11\n    }\n  }, \"Current location :\", \" \", userData ? userData.location : \"not specified yet\")), React.createElement(View, {\n    style: styles.wrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }\n  }, React.createElement(TouchableNativeFeedback, {\n    onPress: buttonAlert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: [styles.card, styles.cashCard],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 11\n    }\n  }, React.createElement(Image, {\n    style: styles.img,\n    source: cash,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 13\n    }\n  }))), React.createElement(TouchableNativeFeedback, {\n    onPress: function onPress() {\n      return user ? navigation.navigate(\"Coupon\") : alert(\"Login First\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 11\n    }\n  }, React.createElement(Image, {\n    source: coupons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }\n  })))), React.createElement(View, {\n    style: styles.categoryWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.categoryHeading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 9\n    }\n  }, \"Categories\"), React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 9\n    }\n  }, React.createElement(SafeAreaView, {\n    style: styles.categoryItems,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 11\n    }\n  }, React.createElement(FlatList, {\n    style: styles.category,\n    data: categoriesButtons,\n    numColumns: 4,\n    renderItem: function renderItem(_ref2) {\n      var item = _ref2.item;\n      return React.createElement(View, {\n        style: styles.itemWrapper,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 17\n        }\n      }, React.createElement(TouchableNativeFeedback, {\n        onPress: function onPress() {\n          return user ? navigation.navigate(\"Categories\", {\n            paramKey: item.value\n          }) : alert(\"Login First\");\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 19\n        }\n      }, React.createElement(View, {\n        style: styles.categoryTile,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 21\n        }\n      }, React.createElement(Image, {\n        style: styles.tileLogo,\n        source: item.img,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 23\n        }\n      }))), React.createElement(Text, {\n        style: styles.categoryItemTitle,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 19\n        }\n      }, item.name));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 13\n    }\n  })))), !user ? React.createElement(View, {\n    style: styles.buttonWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 9\n    }\n  }, React.createElement(TouchableNativeFeedback, {\n    useForeground: true,\n    onPress: function onPress() {\n      return navigation.navigate(\"LogIn\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 11\n    }\n  }, React.createElement(View, {\n    style: styles.loginButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.loginButtonTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 15\n    }\n  }, \"Login\"))), React.createElement(TouchableNativeFeedback, {\n    onPress: function onPress() {\n      return navigation.navigate(\"SignUp\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 11\n    }\n  }, React.createElement(View, {\n    style: styles.registerButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.registerButtonTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 15\n    }\n  }, \"Register\")))) : null);\n}\nvar styles = StyleSheet.create({\n  img: {\n    width: scaledSize(125),\n    resizeMode: \"cover\",\n    height: scaledSize(125)\n  },\n  categoryItemTitle: {\n    color: \"white\"\n  },\n  itemWrapper: {\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  tileLogo: {\n    width: \"100%\",\n    height: \"100%\",\n    resizeMode: \"cover\",\n    borderRadius: 100\n  },\n  categoryItems: {\n    flexDirection: \"row\",\n    width: 383,\n    borderRadius: 20,\n    alignSelf: \"center\",\n    flexWrap: \"wrap\"\n  },\n  categoryTile: {\n    borderRadius: 100,\n    height: 70,\n    backgroundColor: \"#000000\",\n    borderColor: \"#000000\",\n    borderWidth: 2,\n    width: 70,\n    margin: 7,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  registerButtonTitle: {\n    color: \"#000\",\n    fontSize: 18,\n    fontFamily: \"Poppins-Medium\"\n  },\n  loginButtonTitle: {\n    color: \"#ffffff\",\n    fontSize: 18,\n    fontFamily: \"Poppins-Medium\"\n  },\n  buttonWrapper: {\n    marginBottom: 20,\n    flexDirection: \"row\",\n    width: \"100%\",\n    justifyContent: \"space-evenly\",\n    position: \"absolute\",\n    bottom: 0\n  },\n  loginButton: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: 178,\n    borderRadius: 20,\n    height: 58,\n    borderColor: \"#fff\",\n    borderStyle: \"solid\",\n    borderWidth: 1\n  },\n  registerButton: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: 178,\n    borderRadius: 20,\n    height: 58,\n    backgroundColor: \"#00BEB3\"\n  },\n  categoryHeading: {\n    fontSize: scaledSize(16),\n    fontFamily: \"Poppins-Regular\",\n    color: \"#FFFFFF\",\n    marginBottom: \"1.5%\"\n  },\n  category: {\n    backgroundColor: \"#161616\",\n    padding: 20,\n    paddingBottom: 25,\n    width: 383,\n    flexWrap: \"wrap\",\n    flexDirection: \"row\",\n    borderRadius: 20,\n    alignSelf: \"center\"\n  },\n  categoryWrapper: {\n    marginBottom: \"14%\",\n    height: \"38%\",\n    alignSelf: \"center\"\n  },\n  locationText: {\n    marginBottom: \"3%\",\n    marginLeft: \"5%\",\n    fontFamily: \"Poppins-Regular\",\n    color: \"#a8a8a8\",\n    fontSize: scaledSize(12),\n    height: 20\n  },\n  banner: {\n    height: \"20%\",\n    marginTop: 5,\n    width: \"90%\",\n    alignItems: \"center\",\n    alignSelf: \"center\",\n    marginBottom: \"2%\"\n  },\n  wrapper: {\n    marginBottom: \"2%\",\n    flexDirection: \"row\",\n    height: \"20%\",\n    width: \"100%\",\n    justifyContent: \"space-evenly\"\n  },\n  card: {\n    width: \"45%\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: 20,\n    backgroundColor: \"#FF005C\",\n    height: \"100%\"\n  },\n  texts: {\n    borderRadius: 20,\n    fontFamily: \"Poppins-Medium\",\n    fontSize: scaledSize(50),\n    color: \"#fff\"\n  }\n});","map":{"version":3,"sources":["/run/media/silenttush/Data/WorkSpace/Web Projects/Ad-rebate/Screens/Home.js"],"names":["React","useContext","useEffect","useState","useRef","Notifications","TextTicker","globalstyles","cash","coffee","restauraunt","coupons","AuthContext","db","BannerImages","set","useDispatch","useSelector","setNotificationHandler","handleNotification","shouldShowAlert","shouldPlaySound","shouldSetBadge","Dimensions","get","width","height","baseWidth","baseHeight","scaleWidth","scaleHeight","scale","Math","min","scaledSize","size","ceil","HomeScreen","navigation","user","setUserData","userData","pushnotification","setPushNotification","dispatch","bannerData","state","banners","notificationListener","responseListener","notification","setNotifiaction","backPressed","setBackPressed","name","value","img","key","categoriesButtons","setCategoriesButtons","backAction","BackHandler","exitApp","backHandler","addEventListener","remove","isMounted","checkUser","userDoc","collection","doc","uid","then","exists","data","navigate","catch","error","console","log","noti","bannerDoc","undefined","location","type","array","current","addNotificationReceivedListener","addNotificationResponseReceivedListener","response","buttonAlert","Alert","alert","text","style","cancelable","couponReceived","container","styles","banner","fontSize","color","paddingHorizontal","marginTop","fontFamily","locationText","wrapper","card","cashCard","categoryWrapper","categoryHeading","categoryItems","category","item","itemWrapper","paramKey","categoryTile","tileLogo","categoryItemTitle","buttonWrapper","loginButton","loginButtonTitle","registerButton","registerButtonTitle","StyleSheet","create","resizeMode","justifyContent","alignItems","borderRadius","flexDirection","alignSelf","flexWrap","backgroundColor","borderColor","borderWidth","margin","marginBottom","position","bottom","borderStyle","padding","paddingBottom","marginLeft","texts"],"mappings":"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","sourcesContent":["import \"react-native-gesture-handler\";\r\nimport React, { useContext, useEffect, useState, useRef } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  TouchableNativeFeedback,\r\n  Image,\r\n  Alert,\r\n  StatusBar,\r\n  SafeAreaView,\r\n  Dimensions,\r\n  ToastAndroid,\r\n  BackHandler,\r\n  FlatList,\r\n} from \"react-native\";\r\nimport * as Notifications from \"expo-notifications\";\r\nimport TextTicker from \"react-native-text-ticker\";\r\nimport { globalstyles } from \"../styles/global\";\r\nimport cash from \"../assets/images/currency.png\";\r\nimport coffee from \"../assets/images/coffee.png\";\r\nimport restauraunt from \"../assets/images/Restaurant.png\";\r\nimport coupons from \"../assets/svgs/coupons.png\";\r\nimport { AuthContext } from \"../routes/AuthProvider\";\r\nimport { db } from \"../firebases\";\r\nimport BannerImages from \"./BannerImages\";\r\nimport { set } from \"react-native-reanimated\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nNotifications.setNotificationHandler({\r\n  handleNotification: async () => ({\r\n    shouldShowAlert: true,\r\n    shouldPlaySound: false,\r\n    shouldSetBadge: false,\r\n  }),\r\n});\r\n\r\nconst { width, height } = Dimensions.get(\"window\");\r\n\r\nconst baseWidth = 411;\r\nconst baseHeight = 771;\r\nconst scaleWidth = width / baseWidth;\r\nconst scaleHeight = height / baseHeight;\r\nconst scale = Math.min(scaleWidth, scaleHeight);\r\n\r\nexport const scaledSize = (size) => Math.ceil(size * scale);\r\n\r\nexport default function HomeScreen({ navigation }) {\r\n  const { user, setUserData, userData } = useContext(AuthContext);\r\n  const [pushnotification, setPushNotification] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const bannerData = useSelector((state) => state.bannerData.banners);\r\n  const notificationListener = useRef();\r\n  const responseListener = useRef();\r\n  const [notification, setNotifiaction] = useState();\r\n  const [backPressed, setBackPressed] = useState(0);\r\n  const [categoriesButtons, setCategoriesButtons] = useState([\r\n    {\r\n      name: \"Cafe\",\r\n      value: \"cafe\",\r\n      img: coffee,\r\n      key: \"1\",\r\n    },\r\n    {\r\n      name: \"Restaurant\",\r\n      value: \"restaurant\",\r\n      img: restauraunt,\r\n      key: \"5\",\r\n    },\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    const backAction = () => {\r\n      /*if (backPressed > 0) {\r\n        BackHandler.exitApp();\r\n        setBackPressed(0);\r\n      } else {\r\n        setBackPressed(backPressed + 1);\r\n        ToastAndroid.show(\"Press Again To Exit\", ToastAndroid.SHORT);\r\n        setTimeout(() => setBackPressed(0), 2000);}*/\r\n      BackHandler.exitApp();\r\n      return true;\r\n    };\r\n    const backHandler = BackHandler.addEventListener(\r\n      \"hardwareBackPress\",\r\n      backAction\r\n    );\r\n    return () => {\r\n      backHandler.remove();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    //console.log(bannerData);\r\n  }, [bannerData]);\r\n  //TAKING THE USER DATA FROM DATABASE\r\n  useEffect(() => {\r\n    let isMounted = true; // note this flag denote mount status\r\n    checkUser();\r\n    async function checkUser() {\r\n      if (user !== null && isMounted) {\r\n        const userDoc = db.collection(\"Users\").doc(user.uid);\r\n        userDoc\r\n          .get()\r\n          .then(function (doc) {\r\n            if (doc.exists) {\r\n              setUserData(doc.data());\r\n            } else {\r\n              navigation.navigate(\"ProfileComplete\");\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            console.log(\"Error getting document:\", error);\r\n          });\r\n      }\r\n    }\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []);\r\n\r\n  //NOTIFICATION BAR IN THE HOME SCREEN\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    const noti = db.collection(\"Notification\").doc(\"notifications\");\r\n    noti\r\n      .get()\r\n      .then(function (doc) {\r\n        if (doc.exists && isMounted) {\r\n          setNotifiaction(doc.data().notification);\r\n        } else {\r\n          //navigation.navigate(\"ProfileComplete\");\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        console.log(\"Error getting document:\", error);\r\n      });\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []);\r\n\r\n  //TAKING THE BANNERS DATA FROM DATABASE\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    if (true) {\r\n      const bannerDoc = db\r\n        .collection(\"Banners\")\r\n        .doc(\r\n          userData == undefined\r\n            ? \"bhilai\"\r\n            : userData.location == null || userData.location === \"\"\r\n            ? \"bhilai\"\r\n            : userData.location\r\n        );\r\n      bannerDoc\r\n        .get()\r\n        .then(function (doc) {\r\n          if (doc.exists && isMounted) {\r\n            dispatch({\r\n              type: \"updateBanner\",\r\n              array: doc.data().banners,\r\n            });\r\n          } else {\r\n            // console.log(\"error\");\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n          console.log(\"Error getting document:\", error);\r\n        });\r\n    }\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []);\r\n\r\n  // This listener is fired when user receive notification\r\n  notificationListener.current = Notifications.addNotificationReceivedListener(\r\n    (notification) => {\r\n      setPushNotification(notification);\r\n    }\r\n  );\r\n\r\n  // This listener is fired whenever a user taps on or interacts with a notification (works when app is foregrounded, backgrounded, or killed)\r\n  responseListener.current = Notifications.addNotificationResponseReceivedListener(\r\n    (response) => {\r\n      console.log(response);\r\n    }\r\n  );\r\n\r\n  //EARNING THE UPDATE ALERT\r\n  const buttonAlert = () =>\r\n    Alert.alert(\r\n      \"Update Alert\",\r\n      \"This section will be available soon!\",\r\n      [\r\n        {\r\n          text: \"Cancel\",\r\n          style: \"cancel\",\r\n        },\r\n        { text: \"OK\" },\r\n      ],\r\n      { cancelable: false }\r\n    );\r\n\r\n  useEffect(() => {\r\n    if (userData != undefined) {\r\n      if (userData.couponReceived != undefined) {\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <View style={globalstyles.container}>\r\n      <StatusBar backgroundColor=\"black\" barStyle=\"light-content\" />\r\n      <View style={styles.banner}>\r\n        <BannerImages />\r\n      </View>\r\n      {notification === null ||\r\n      notification === \"\" ||\r\n      notification === undefined ||\r\n      !user ? null : (\r\n        <View>\r\n          <TextTicker\r\n            style={{\r\n              fontSize: 16,\r\n              color: \"#dadada\",\r\n              height: 50,\r\n              width: \"100%\",\r\n              paddingHorizontal: 15,\r\n              marginTop: 10,\r\n              fontFamily: \"Poppins-Regular\",\r\n            }}\r\n            duration={13000}\r\n            loop\r\n            bounce={false}\r\n            marqueeOnMount={true}\r\n            animationType=\"scroll\"\r\n            shouldAnimateTreshold={0}\r\n            repeatSpacer={10}\r\n            marqueeDelay={0}\r\n          >\r\n            {notification}\r\n          </TextTicker>\r\n        </View>\r\n      )}\r\n      {\r\n        <View style={styles.location}>\r\n          <Text style={styles.locationText}>\r\n            Current location :{\" \"}\r\n            {userData ? userData.location : \"not specified yet\"}\r\n          </Text>\r\n        </View>\r\n      }\r\n      <View style={styles.wrapper}>\r\n        <TouchableNativeFeedback onPress={buttonAlert}>\r\n          <View style={[styles.card, styles.cashCard]}>\r\n            <Image style={styles.img} source={cash}></Image>\r\n          </View>\r\n        </TouchableNativeFeedback>\r\n        <TouchableNativeFeedback\r\n          onPress={() =>\r\n            user ? navigation.navigate(\"Coupon\") : alert(\"Login First\")\r\n          }\r\n        >\r\n          <View style={styles.card}>\r\n            <Image source={coupons}></Image>\r\n          </View>\r\n        </TouchableNativeFeedback>\r\n      </View>\r\n      <View style={styles.categoryWrapper}>\r\n        <Text style={styles.categoryHeading}>Categories</Text>\r\n        <View>\r\n          <SafeAreaView style={styles.categoryItems}>\r\n            <FlatList\r\n              style={styles.category}\r\n              data={categoriesButtons}\r\n              numColumns={4}\r\n              renderItem={({ item }) => (\r\n                <View style={styles.itemWrapper}>\r\n                  <TouchableNativeFeedback\r\n                    onPress={() =>\r\n                      user\r\n                        ? navigation.navigate(\"Categories\", {\r\n                            paramKey: item.value,\r\n                          })\r\n                        : alert(\"Login First\")\r\n                    }\r\n                  >\r\n                    <View style={styles.categoryTile}>\r\n                      <Image style={styles.tileLogo} source={item.img}></Image>\r\n                    </View>\r\n                  </TouchableNativeFeedback>\r\n                  <Text style={styles.categoryItemTitle}>{item.name}</Text>\r\n                </View>\r\n              )}\r\n            />\r\n          </SafeAreaView>\r\n        </View>\r\n      </View>\r\n\r\n      {!user ? (\r\n        <View style={styles.buttonWrapper}>\r\n          <TouchableNativeFeedback\r\n            useForeground={true}\r\n            onPress={() => navigation.navigate(\"LogIn\")}\r\n          >\r\n            <View style={styles.loginButton}>\r\n              <Text style={styles.loginButtonTitle}>Login</Text>\r\n            </View>\r\n          </TouchableNativeFeedback>\r\n          <TouchableNativeFeedback\r\n            onPress={() => navigation.navigate(\"SignUp\")}\r\n          >\r\n            <View style={styles.registerButton}>\r\n              <Text style={styles.registerButtonTitle}>Register</Text>\r\n            </View>\r\n          </TouchableNativeFeedback>\r\n        </View>\r\n      ) : null}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  img: {\r\n    width: scaledSize(125),\r\n    resizeMode: \"cover\",\r\n    height: scaledSize(125),\r\n  },\r\n  categoryItemTitle: { color: \"white\" },\r\n  itemWrapper: {\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  tileLogo: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    resizeMode: \"cover\",\r\n    borderRadius: 100,\r\n  },\r\n  categoryItems: {\r\n    flexDirection: \"row\",\r\n    width: 383,\r\n    borderRadius: 20,\r\n    alignSelf: \"center\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  categoryTile: {\r\n    borderRadius: 100,\r\n    height: 70,\r\n    backgroundColor: \"#000000\",\r\n    borderColor: \"#000000\",\r\n    borderWidth: 2,\r\n    width: 70,\r\n    margin: 7,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  registerButtonTitle: {\r\n    color: \"#000\",\r\n    fontSize: 18,\r\n    fontFamily: \"Poppins-Medium\",\r\n  },\r\n  loginButtonTitle: {\r\n    color: \"#ffffff\",\r\n    fontSize: 18,\r\n    fontFamily: \"Poppins-Medium\",\r\n  },\r\n  buttonWrapper: {\r\n    marginBottom: 20,\r\n    flexDirection: \"row\",\r\n    width: \"100%\",\r\n    justifyContent: \"space-evenly\",\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n  },\r\n  loginButton: {\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: 178,\r\n    borderRadius: 20,\r\n    height: 58,\r\n    borderColor: \"#fff\",\r\n    borderStyle: \"solid\",\r\n    borderWidth: 1,\r\n  },\r\n  registerButton: {\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: 178,\r\n    borderRadius: 20,\r\n    height: 58,\r\n    backgroundColor: \"#00BEB3\",\r\n  },\r\n  categoryHeading: {\r\n    fontSize: scaledSize(16),\r\n    fontFamily: \"Poppins-Regular\",\r\n    color: \"#FFFFFF\",\r\n    marginBottom: \"1.5%\",\r\n  },\r\n  category: {\r\n    backgroundColor: \"#161616\",\r\n    padding: 20,\r\n    paddingBottom: 25,\r\n    width: 383,\r\n    flexWrap: \"wrap\",\r\n    flexDirection: \"row\",\r\n    borderRadius: 20,\r\n    alignSelf: \"center\",\r\n  },\r\n  categoryWrapper: {\r\n    marginBottom: \"14%\",\r\n    height: \"38%\",\r\n    alignSelf: \"center\",\r\n  },\r\n  locationText: {\r\n    marginBottom: \"3%\",\r\n    marginLeft: \"5%\",\r\n    fontFamily: \"Poppins-Regular\",\r\n    color: \"#a8a8a8\",\r\n    fontSize: scaledSize(12),\r\n    height: 20,\r\n  },\r\n  banner: {\r\n    height: \"20%\",\r\n    marginTop: 5,\r\n    width: \"90%\",\r\n    alignItems: \"center\",\r\n    alignSelf: \"center\",\r\n    marginBottom: \"2%\",\r\n  },\r\n  wrapper: {\r\n    marginBottom: \"2%\",\r\n    flexDirection: \"row\",\r\n    height: \"20%\",\r\n    width: \"100%\",\r\n    justifyContent: \"space-evenly\",\r\n  },\r\n  card: {\r\n    width: \"45%\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    borderRadius: 20,\r\n    backgroundColor: \"#FF005C\",\r\n    height: \"100%\",\r\n  },\r\n  texts: {\r\n    borderRadius: 20,\r\n    fontFamily: \"Poppins-Medium\",\r\n    fontSize: scaledSize(50),\r\n    color: \"#fff\",\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}
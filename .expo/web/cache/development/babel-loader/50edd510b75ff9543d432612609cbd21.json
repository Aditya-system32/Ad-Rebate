{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/run/media/silenttush/Data/WorkSpace/Web Projects/Ad-rebate/Screens/Transaction.js\";\nimport \"react-native-gesture-handler\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport { db } from \"../firebases\";\nimport { AuthContext } from \"../routes/AuthProvider\";\nimport { FlatList, ScrollView, TouchableHighlight, TouchableNativeFeedback, TouchableOpacity } from \"react-native-gesture-handler\";\nimport { scaledSize } from \"./Home\";\nexport default function TransactionScreen(_ref) {\n  var _this = this;\n\n  var navigation = _ref.navigation;\n\n  var _useContext = useContext(AuthContext),\n      user = _useContext.user;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      redeemCouponArray = _useState2[0],\n      setRedeemCouponArray = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setloading = _useState4[1];\n\n  useEffect(function () {\n    var backAction = function backAction() {\n      navigation.goBack();\n      return true;\n    };\n\n    var backHandler = BackHandler.addEventListener(\"hardwareBackPress\", backAction);\n    return function () {\n      backHandler.remove();\n    };\n  }, []);\n  useEffect(function () {\n    var tempCouponArray = [];\n    getdata();\n\n    function getdata() {\n      return _regeneratorRuntime.async(function getdata$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (user) {\n                setloading(true);\n                db.collection(\"Users\").doc(user.uid).collection(\"Transactions\").orderBy(\"dateRedeemed\", \"desc\").orderBy(\"timeRedeemed\", \"desc\").get().then(function (res) {\n                  res.forEach(function (doc) {\n                    tempCouponArray.push(doc.data());\n                  });\n                  setRedeemCouponArray(tempCouponArray);\n                  setloading(false);\n                }).catch(function (err) {\n                  console.log(err);\n                });\n              }\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, [user]);\n\n  function refresh() {\n    var tempCouponArray = [];\n\n    if (user) {\n      setloading(true);\n      db.collection(\"Users\").doc(user.uid).collection(\"Transactions\").orderBy(\"dateRedeemed\", \"desc\").orderBy(\"timeRedeemed\", \"desc\").get().then(function (res) {\n        res.forEach(function (doc) {\n          tempCouponArray.push(doc.data());\n        });\n        setRedeemCouponArray(tempCouponArray);\n        setloading(false);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, React.createElement(StatusBar, {\n    backgroundColor: \"black\",\n    barStyle: \"light-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }), React.createElement(Text, {\n    style: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, \"Your History,\"), React.createElement(SafeAreaView, {\n    style: styles.transactionContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, loading ? React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"#2c2c2c\",\n    style: {\n      marginTop: \"50%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }) : React.createElement(FlatList, {\n    showsVerticalScrollIndicator: true,\n    alwaysBounceVertical: true,\n    bounces: true,\n    onRefresh: function onRefresh() {\n      return refresh();\n    },\n    bouncesZoom: true,\n    ListEmptyComponent: function ListEmptyComponent() {\n      return React.createElement(Text, {\n        style: {\n          color: \"#ffc8c8\",\n          fontFamily: \"Poppins-Regular\",\n          fontSize: scaledSize(12),\n          alignSelf: \"center\",\n          textAlignVertical: \"center\",\n          marginTop: \"70%\"\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 15\n        }\n      }, \"You have done no transactions yet.\");\n    },\n    data: redeemCouponArray,\n    keyExtractor: function keyExtractor(item) {\n      return item.couponId;\n    },\n    renderItem: function renderItem(_ref2) {\n      var item = _ref2.item;\n      var amPm = item.timeRedeemed <= \"12-00\" ? \"AM\" : \"PM\";\n      var hour = item.timeRedeemed.split(\"-\")[0] % 12;\n      var timetoShow = hour + \":\" + item.timeRedeemed.split(\"-\")[1];\n      return React.createElement(TouchableOpacity, {\n        activeOpacity: 0.7,\n        background: TouchableNativeFeedback.Ripple(\"red\", false),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: styles.transactionItem,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 19\n        }\n      }, React.createElement(Text, {\n        style: styles.itemTitle,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }\n      }, item.clientName), React.createElement(Text, {\n        style: styles.itemId,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }\n      }, \"#\" + item.couponId), React.createElement(View, {\n        style: styles.actionAndDiscount,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: styles.itemDiscount,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 23\n        }\n      }, \"â‚¹ \" + item.discount), React.createElement(Text, {\n        style: styles.itemAction,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 23\n        }\n      }, item.action)), React.createElement(Text, {\n        style: styles.itemDate,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }\n      }, item.dateRedeemed + \" \" + timetoShow + \" \" + amPm)));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  })));\n}\nvar styles = StyleSheet.create({\n  title: {\n    textAlign: \"left\",\n    backgroundColor: \"black\",\n    width: \"100%\",\n    fontFamily: \"Poppins-SemiBold\",\n    color: \"#cccccc\",\n    fontSize: scaledSize(25),\n    padding: 20,\n    paddingBottom: 0\n  },\n  titleAndId: {},\n  actionAndDiscount: {\n    flexDirection: \"row\"\n  },\n  itemTitle: {\n    color: \"white\",\n    fontSize: scaledSize(14),\n    fontFamily: \"Poppins-Medium\",\n    marginLeft: 5\n  },\n  itemId: {\n    color: \"#747474\",\n    fontFamily: \"Poppins-Regular\",\n    fontSize: 9,\n    marginLeft: 5\n  },\n  itemDiscount: {\n    color: \"#34c263\",\n    fontFamily: \"Poppins-SemiBold\",\n    fontSize: scaledSize(15),\n    paddingTop: 5,\n    marginLeft: 5\n  },\n  itemDate: {\n    position: \"absolute\",\n    right: 20,\n    bottom: 10,\n    color: \"#747474\",\n    fontFamily: \"Poppins-Medium\",\n    fontSize: scaledSize(9)\n  },\n  itemAction: {\n    color: \"#34c263\",\n    fontFamily: \"Poppins-Medium\",\n    fontSize: scaledSize(15),\n    paddingTop: 5,\n    marginLeft: 5\n  },\n  transactionItem: {\n    color: \"white\",\n    backgroundColor: \"#161616\",\n    width: \"92%\",\n    alignSelf: \"center\",\n    zIndex: 5,\n    padding: 10,\n    borderRadius: 10,\n    position: \"relative\",\n    marginBottom: 15,\n    justifyContent: \"center\"\n  },\n  transactionContainer: {\n    backgroundColor: \"black\",\n    color: \"white\",\n    flex: 1,\n    width: \"100%\",\n    paddingTop: 20\n  },\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n});","map":{"version":3,"sources":["/run/media/silenttush/Data/WorkSpace/Web Projects/Ad-rebate/Screens/Transaction.js"],"names":["React","useContext","useEffect","useState","db","AuthContext","FlatList","ScrollView","TouchableHighlight","TouchableNativeFeedback","TouchableOpacity","scaledSize","TransactionScreen","navigation","user","redeemCouponArray","setRedeemCouponArray","loading","setloading","backAction","goBack","backHandler","BackHandler","addEventListener","remove","tempCouponArray","getdata","collection","doc","uid","orderBy","get","then","res","forEach","push","data","catch","err","console","log","refresh","styles","container","title","transactionContainer","marginTop","color","fontFamily","fontSize","alignSelf","textAlignVertical","item","couponId","amPm","timeRedeemed","hour","split","timetoShow","Ripple","transactionItem","itemTitle","clientName","itemId","actionAndDiscount","itemDiscount","discount","itemAction","action","itemDate","dateRedeemed","StyleSheet","create","textAlign","backgroundColor","width","padding","paddingBottom","titleAndId","flexDirection","marginLeft","paddingTop","position","right","bottom","zIndex","borderRadius","marginBottom","justifyContent","flex","alignItems"],"mappings":"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","sourcesContent":["import \"react-native-gesture-handler\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  Button,\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  StatusBar,\r\n  SafeAreaView,\r\n  ActivityIndicator,\r\n  BackHandler,\r\n} from \"react-native\";\r\nimport { db } from \"../firebases\";\r\nimport { AuthContext } from \"../routes/AuthProvider\";\r\nimport {\r\n  FlatList,\r\n  ScrollView,\r\n  TouchableHighlight,\r\n  TouchableNativeFeedback,\r\n  TouchableOpacity,\r\n} from \"react-native-gesture-handler\";\r\nimport { scaledSize } from \"./Home\";\r\n\r\nexport default function TransactionScreen({ navigation }) {\r\n  const { user } = useContext(AuthContext);\r\n  const [redeemCouponArray, setRedeemCouponArray] = useState([]);\r\n  const [loading, setloading] = useState(false);\r\n  useEffect(() => {\r\n    const backAction = () => {\r\n      navigation.goBack();\r\n      return true;\r\n    };\r\n    const backHandler = BackHandler.addEventListener(\r\n      \"hardwareBackPress\",\r\n      backAction\r\n    );\r\n    return () => {\r\n      backHandler.remove();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const tempCouponArray = [];\r\n    getdata();\r\n    async function getdata() {\r\n      if (user) {\r\n        setloading(true);\r\n        db.collection(\"Users\")\r\n          .doc(user.uid)\r\n          .collection(\"Transactions\")\r\n          .orderBy(\"dateRedeemed\", \"desc\")\r\n          .orderBy(\"timeRedeemed\", \"desc\")\r\n          .get()\r\n          .then((res) => {\r\n            res.forEach((doc) => {\r\n              //console.log(doc.data());\r\n              tempCouponArray.push(doc.data());\r\n            });\r\n            setRedeemCouponArray(tempCouponArray);\r\n            setloading(false);\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      }\r\n    }\r\n  }, [user]);\r\n  //console.log(redeemCouponArray);\r\n  function refresh() {\r\n    const tempCouponArray = [];\r\n    if (user) {\r\n      setloading(true);\r\n      db.collection(\"Users\")\r\n        .doc(user.uid)\r\n        .collection(\"Transactions\")\r\n        .orderBy(\"dateRedeemed\", \"desc\")\r\n        .orderBy(\"timeRedeemed\", \"desc\")\r\n        .get()\r\n        .then((res) => {\r\n          res.forEach((doc) => {\r\n            //console.log(doc.data());\r\n            tempCouponArray.push(doc.data());\r\n          });\r\n          setRedeemCouponArray(tempCouponArray);\r\n          setloading(false);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    }\r\n  }\r\n  return (\r\n    <View style={styles.container}>\r\n      <StatusBar backgroundColor=\"black\" barStyle=\"light-content\" />\r\n      <Text style={styles.title}>Your History,</Text>\r\n      <SafeAreaView style={styles.transactionContainer}>\r\n        {loading ? (\r\n          <ActivityIndicator\r\n            size=\"large\"\r\n            color=\"#2c2c2c\"\r\n            style={{ marginTop: \"50%\" }}\r\n          />\r\n        ) : (\r\n          <FlatList\r\n            showsVerticalScrollIndicator={true}\r\n            alwaysBounceVertical={true}\r\n            bounces={true}\r\n            onRefresh={() => refresh()}\r\n            bouncesZoom={true}\r\n            ListEmptyComponent={() => (\r\n              <Text\r\n                style={{\r\n                  color: \"#ffc8c8\",\r\n                  fontFamily: \"Poppins-Regular\",\r\n                  fontSize: scaledSize(12),\r\n                  alignSelf: \"center\",\r\n                  textAlignVertical: \"center\",\r\n                  marginTop: \"70%\",\r\n                }}\r\n              >\r\n                You have done no transactions yet.\r\n              </Text>\r\n            )}\r\n            data={redeemCouponArray}\r\n            keyExtractor={(item) => item.couponId}\r\n            renderItem={({ item }) => {\r\n              const amPm = item.timeRedeemed <= \"12-00\" ? \"AM\" : \"PM\";\r\n              const hour = item.timeRedeemed.split(\"-\")[0] % 12;\r\n              const timetoShow = hour + \":\" + item.timeRedeemed.split(\"-\")[1];\r\n              return (\r\n                <TouchableOpacity\r\n                  activeOpacity={0.7}\r\n                  background={TouchableNativeFeedback.Ripple(\"red\", false)}\r\n                >\r\n                  <View style={styles.transactionItem}>\r\n                    <Text style={styles.itemTitle}>{item.clientName}</Text>\r\n                    <Text style={styles.itemId}>{\"#\" + item.couponId}</Text>\r\n\r\n                    <View style={styles.actionAndDiscount}>\r\n                      <Text style={styles.itemDiscount}>\r\n                        {\"â‚¹ \" + item.discount}\r\n                      </Text>\r\n                      <Text style={styles.itemAction}>{item.action}</Text>\r\n                    </View>\r\n                    <Text style={styles.itemDate}>\r\n                      {item.dateRedeemed + \" \" + timetoShow + \" \" + amPm}\r\n                    </Text>\r\n                  </View>\r\n                </TouchableOpacity>\r\n              );\r\n            }}\r\n          />\r\n        )}\r\n      </SafeAreaView>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  title: {\r\n    textAlign: \"left\",\r\n    backgroundColor: \"black\",\r\n    width: \"100%\",\r\n    fontFamily: \"Poppins-SemiBold\",\r\n    color: \"#cccccc\",\r\n    fontSize: scaledSize(25),\r\n    padding: 20,\r\n    paddingBottom: 0,\r\n  },\r\n  titleAndId: {},\r\n  actionAndDiscount: {\r\n    flexDirection: \"row\",\r\n  },\r\n  itemTitle: {\r\n    color: \"white\",\r\n    fontSize: scaledSize(14),\r\n    fontFamily: \"Poppins-Medium\",\r\n    marginLeft: 5,\r\n  },\r\n  itemId: {\r\n    color: \"#747474\",\r\n    fontFamily: \"Poppins-Regular\",\r\n    fontSize: 9,\r\n    marginLeft: 5,\r\n  },\r\n  itemDiscount: {\r\n    color: \"#34c263\",\r\n    fontFamily: \"Poppins-SemiBold\",\r\n    fontSize: scaledSize(15),\r\n    paddingTop: 5,\r\n    marginLeft: 5,\r\n  },\r\n  itemDate: {\r\n    position: \"absolute\",\r\n    right: 20,\r\n    bottom: 10,\r\n    color: \"#747474\",\r\n    fontFamily: \"Poppins-Medium\",\r\n    fontSize: scaledSize(9),\r\n  },\r\n  itemAction: {\r\n    color: \"#34c263\",\r\n    fontFamily: \"Poppins-Medium\",\r\n    fontSize: scaledSize(15),\r\n    paddingTop: 5,\r\n    marginLeft: 5,\r\n  },\r\n  transactionItem: {\r\n    color: \"white\",\r\n    backgroundColor: \"#161616\",\r\n    width: \"92%\",\r\n    alignSelf: \"center\",\r\n    zIndex: 5,\r\n    padding: 10,\r\n    borderRadius: 10,\r\n    position: \"relative\",\r\n    marginBottom: 15,\r\n    justifyContent: \"center\",\r\n  },\r\n  transactionContainer: {\r\n    backgroundColor: \"black\",\r\n    color: \"white\",\r\n    flex: 1,\r\n    width: \"100%\",\r\n    paddingTop: 20,\r\n  },\r\n  container: {\r\n    flex: 1,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}